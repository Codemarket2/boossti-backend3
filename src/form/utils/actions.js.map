{"version":3,"file":"actions.js","sourceRoot":"","sources":["actions.ts"],"names":[],"mappings":"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","sourcesContent":["// MONGOOSE\r\nimport { ClientSession } from 'mongoose';\r\n\r\n// OTHERS\r\nimport { sendEmail } from '../../utils/email';\r\nimport { User } from '../../user/utils/userModel';\r\nimport { FormModel } from './formModel';\r\nimport PageModel from '../../template/utils/pageModel';\r\nimport { ResponseModel } from './responseModel';\r\nimport { sendSms } from '../../utils/sms';\r\nimport {\r\n  getFieldValue,\r\n  replaceSchemaVariables,\r\n  getUserAttributes,\r\n  generateUserPassword,\r\n} from './actionHelper';\r\nimport { createDistribution } from '../../utils/cloudfront';\r\nimport { createCognitoGroup, deleteCognitoGroup, updateCognitoGroup } from './cognitoGroupHandler';\r\nimport {\r\n  addUserToGroup,\r\n  createAWSUser,\r\n  deleteUser,\r\n  isUserAlreadyExist,\r\n  removeUserFromGroup,\r\n  updateUserAttributes,\r\n  getGroupListOfUser,\r\n} from '../../permissions/utils/cognitoHandlers';\r\nimport axios from 'axios';\r\nimport { getActionVariableValues2, replaceVariableValue2 } from './actionVariables';\r\nimport { getLeftPartValue } from '../condition/getConditionPartValue';\r\nimport { getFormIds, getFormsByIds } from '../condition/getConditionForm';\r\nimport { resolveConditionHelper } from '../condition/resolveCondition';\r\nimport { IValue } from '../types/response';\r\nimport { getValueObject } from './getValueObject';\r\ninterface IPayload {\r\n  triggerType: 'onCreate' | 'onUpdate' | 'onDelete' | 'onView';\r\n  response: any;\r\n  form: any;\r\n  args?: any;\r\n  session: ClientSession;\r\n  user: any;\r\n}\r\n\r\nexport const runFormActions = async ({\r\n  triggerType,\r\n  response,\r\n  form,\r\n  args,\r\n  session,\r\n  user,\r\n}: IPayload) => {\r\n  const userForm = await FormModel.findOne({ slug: process.env.USERS_FORM_SLUG }).session(session);\r\n\r\n  const actions = form?.settings?.actions?.filter(\r\n    (action) => action.active && action.triggerType === triggerType,\r\n  );\r\n\r\n  /**  indicates if the action is ran by user having a boossti account */\r\n  const isAppUser = Boolean(response?.createdBy?._id);\r\n\r\n  if (actions?.length > 0 && response?._id && form?._id && !(process.env.NODE_ENV === 'test')) {\r\n    for (const action of actions) {\r\n      let triggerConditionResult = !(action?.triggerConditions?.length > 0);\r\n\r\n      if (action?.triggerConditions?.length > 0) {\r\n        // resolve condition\r\n        try {\r\n          triggerConditionResult = await resolveConditionHelper({\r\n            responseId: response?._id,\r\n            conditions: action?.triggerConditions,\r\n            user: user,\r\n          });\r\n        } catch (error) {\r\n          //\r\n        }\r\n      }\r\n      if (triggerConditionResult) {\r\n        // console.log('triggerConditionResult', triggerConditionResult);\r\n        const variableValues = await getActionVariableValues2(action, response);\r\n\r\n        if (\r\n          action?.actionType === 'sendEmail' &&\r\n          action?.senderEmail &&\r\n          action?.subject &&\r\n          action?.body &&\r\n          (action?.receiverType === 'formOwner' ||\r\n            (action?.receiverType === 'responseSubmitter' && response.createdBy?._id) ||\r\n            (action?.receiverType === 'customEmail' && action?.receiverEmails?.length > 0) ||\r\n            (action?.receiverType === 'emailField' && action?.emailFieldId))\r\n        ) {\r\n          const payload: any = {\r\n            from: action?.senderEmail,\r\n            body: replaceSchemaVariables({ variable: action?.body, form, response, userForm }),\r\n            subject: action?.subject,\r\n          };\r\n\r\n          if (action?.variables?.length > 0) {\r\n            payload.subject = replaceVariableValue2({\r\n              text: payload?.subject,\r\n              variableValues,\r\n            });\r\n            payload.body = replaceVariableValue2({\r\n              text: payload?.body,\r\n              variableValues,\r\n            });\r\n            payload.senderEmail = replaceVariableValue2({\r\n              text: payload?.senderEmail,\r\n              variableValues,\r\n            });\r\n          }\r\n\r\n          if (action?.receiverType === 'formOwner') {\r\n            const user = getUserAttributes(userForm, form?.createdBy);\r\n            if (user?.email) {\r\n              payload.to = [user?.email];\r\n            }\r\n          } else if (action?.receiverType === 'responseSubmitter') {\r\n            const user = getUserAttributes(userForm, response?.createdBy);\r\n            if (!user.email) {\r\n              throw new Error('Response submitter email not found in send email action');\r\n            }\r\n            payload.to = [user?.email];\r\n          } else if (action?.receiverType === 'customEmail') {\r\n            payload.to = action?.receiverEmails;\r\n          } else if (action?.receiverType === 'emailField') {\r\n            const formIds = getFormIds(action?.emailFieldId);\r\n            const forms = await getFormsByIds(formIds);\r\n            const emailFieldValue = await getLeftPartValue({\r\n              response,\r\n              forms,\r\n              conditionPart: action?.emailFieldId,\r\n            });\r\n            if (emailFieldValue) {\r\n              payload.to = [emailFieldValue];\r\n            }\r\n          }\r\n          if (!(payload?.to?.length > 0)) {\r\n            throw new Error('Receiver email not found in send email action');\r\n          }\r\n          await sendEmail(payload);\r\n        } else if (\r\n          action?.actionType === 'createWhatsappGroup' &&\r\n          action?.phoneNumber &&\r\n          action?.groupName &&\r\n          action?.productid &&\r\n          action?.phoneID &&\r\n          action?.apiToken &&\r\n          action?.whatsappMessage\r\n        ) {\r\n          try {\r\n            let phoneNumber;\r\n            let groupName = action?.groupName;\r\n            const productid = action?.productid;\r\n            const phoneID = action?.phoneID;\r\n            const apiToken = action?.apiToken;\r\n            const whatsappMessage = action?.whatsappMessage;\r\n            if (variableValues) {\r\n              groupName = replaceVariableValue2({\r\n                text: groupName,\r\n                variableValues,\r\n              });\r\n            }\r\n\r\n            response?.values?.forEach((value) => {\r\n              if (value.field?.toString() === action?.phoneNumber?.toString()) {\r\n                phoneNumber = value.valueNumber.toString();\r\n              }\r\n            });\r\n            phoneNumber = '91' + phoneNumber;\r\n            const numbersArray = ['919302449063', '18053007217', '18059055170'];\r\n            numbersArray.push(phoneNumber.toString());\r\n\r\n            const url = `https://api.maytapi.com/api/${productid}/${phoneID}/createGroup`;\r\n\r\n            const data3 = await axios.post(\r\n              url,\r\n              {\r\n                name: groupName,\r\n                numbers: numbersArray,\r\n              },\r\n              {\r\n                headers: {\r\n                  'Content-Type': 'application/json',\r\n                  'x-maytapi-key': apiToken,\r\n                },\r\n              },\r\n            );\r\n\r\n            if (data3?.data?.data?.id) {\r\n              const url2 = `https://api.maytapi.com/api/${productid}/${phoneID}/sendMessage`;\r\n              const data2 = await axios({\r\n                method: 'post',\r\n                url: url2,\r\n                headers: {\r\n                  'Content-Type': 'application/json',\r\n                  'x-maytapi-key': apiToken,\r\n                },\r\n                data: {\r\n                  to_number: data3?.data?.data?.id,\r\n                  type: 'text',\r\n                  message: whatsappMessage,\r\n                },\r\n              });\r\n\r\n              const url3 = `https://api.maytapi.com/api/${productid}/${phoneID}/group/promote`;\r\n              const admin = await axios({\r\n                method: 'post',\r\n                url: url3,\r\n                headers: {\r\n                  'Content-Type': 'application/json',\r\n                  'x-maytapi-key': apiToken,\r\n                },\r\n                data: {\r\n                  conversation_id: data3?.data?.data?.id,\r\n                  number: '18053007217',\r\n                },\r\n              });\r\n            }\r\n          } catch (error) {\r\n            console.log('error', error);\r\n          }\r\n        } else if (\r\n          action?.actionType === 'emailScrappingFromGoogleSeachAPI' &&\r\n          action?.searchkeyword &&\r\n          action?.searchEngineId &&\r\n          action?.googleApiKey &&\r\n          action?.exactTerm\r\n        ) {\r\n          let searchKeyword;\r\n          const searchEngineId: string = action?.searchEngineId;\r\n          const googleApiKey: string = action?.googleApiKey;\r\n          const exactTerm: string = action?.exactTerm;\r\n          const fieldId = {\r\n            emailFiledId: '',\r\n            phoneFiledId: '',\r\n            linkFieldId: '',\r\n          };\r\n          form.fields.forEach((field) => {\r\n            if (field?.fieldType === 'email') {\r\n              fieldId.emailFiledId = field?._id;\r\n            } else if (field?.fieldType === 'text') {\r\n              fieldId.phoneFiledId = field?._id;\r\n            } else if (field?.fieldType === 'link') {\r\n              fieldId.linkFieldId = field?._id;\r\n            }\r\n          });\r\n          response?.values?.forEach((value) => {\r\n            const x = value.field.toString();\r\n            const y = action?.searchkeyword?.toString();\r\n\r\n            if (x === y) {\r\n              searchKeyword = value.value;\r\n            }\r\n          });\r\n\r\n          const url = `https://www.googleapis.com/customsearch/v1?key=${googleApiKey}&cx=${searchEngineId}&q=${searchKeyword}&exactTerms=${exactTerm}`;\r\n          const data = await axios({\r\n            method: 'get',\r\n            url: url,\r\n          });\r\n\r\n          const urlArray: string[] = [];\r\n          data?.data?.items?.forEach((item) => {\r\n            urlArray.push(item?.link);\r\n          });\r\n          // debugger;\r\n          const dataArray: any = [];\r\n          const values: IValue[] = [];\r\n          for (let i = 0; i < 1; i++) {\r\n            const urlForHtmlCode = urlArray[i];\r\n            const htmlData = await axios({\r\n              method: 'get',\r\n              url: urlForHtmlCode,\r\n            });\r\n            const html = htmlData?.data; // This will get html code\r\n            const string = html.replace(/<[^>]+>/g, ''); // This will remove html tags //eslint-disable-line\r\n            const email = string.match(/[\\w.]+@[\\w.]+/g); // This will get email //eslint-disable-line\r\n            const phone = string.match(\r\n              /(\\d{3}[-\\.\\s]??\\d{3}[-\\.\\s]??\\d{4}|\\(\\d{3}\\)\\s*\\d{3}[-\\.\\s]??\\d{4}|\\d{3}[-\\.\\s]??\\d{4})/g, //eslint-disable-line\r\n            ); // This will get phone number\r\n            const dataObj = {\r\n              email: email,\r\n              phone: phone,\r\n              url: urlForHtmlCode,\r\n            };\r\n\r\n            dataArray.push(dataObj);\r\n\r\n            const emailFieldObj = form.fields.find((field) => field?._id === fieldId.emailFiledId);\r\n            const phoneFieldObj = form.fields.find((field) => field?._id === fieldId.phoneFiledId);\r\n            const linkFieldObj = form.fields.find((field) => field?._id === fieldId.linkFieldId);\r\n            for (const email of dataObj.email) {\r\n              const valueEmailobj = getValueObject(email, emailFieldObj, fieldId.emailFiledId);\r\n              values.push(valueEmailobj);\r\n            }\r\n            for (const phone of dataObj.phone) {\r\n              const valuePhoneobj = getValueObject(phone, phoneFieldObj, fieldId.phoneFiledId);\r\n              values.push(valuePhoneobj);\r\n            }\r\n\r\n            const valueLinkobj = getValueObject(dataObj.url, linkFieldObj, fieldId.linkFieldId);\r\n            values.push(valueLinkobj);\r\n          }\r\n\r\n          await ResponseModel.findByIdAndUpdate(\r\n            response._id,\r\n            { $push: { values: values } },\r\n            { session },\r\n          );\r\n          // debugger;\r\n        } else if (\r\n          action?.actionType === 'linkedinInviteAutomation' &&\r\n          action?.linkedinEmail &&\r\n          action.linkedinPassword &&\r\n          action.noOfInvites &&\r\n          action.keyword &&\r\n          action.tag\r\n        ) {\r\n          let email = '',\r\n            password = '',\r\n            numberOfInvites = 0,\r\n            keyword = '',\r\n            tag = '';\r\n          response?.values?.forEach((value) => {\r\n            if (value.field?.toString() === action?.linkedinEmail?.toString()) {\r\n              email = value.value;\r\n            } else if (value.field?.toString() === action?.linkedinPassword?.toString()) {\r\n              password = value.value;\r\n            } else if (value.field?.toString() === action?.noOfInvites?.toString()) {\r\n              numberOfInvites = value.valueNumber;\r\n            } else if (value.field?.toString() === action?.keyword?.toString()) {\r\n              keyword = value.value;\r\n            } else if (value.field?.toString() === action?.tag?.toString()) {\r\n              tag = value.value;\r\n            }\r\n          });\r\n\r\n          axios({\r\n            method: 'post',\r\n            url: 'https://e3iug2f6zh.execute-api.us-east-1.amazonaws.com/dev',\r\n            headers: {},\r\n            data: {\r\n              email: email,\r\n              password: password,\r\n              numberOfInvites: numberOfInvites,\r\n              keyword: keyword,\r\n              tag: tag,\r\n            },\r\n          });\r\n        } else if (action?.actionType === 'sendSms' && action?.phoneFieldId && action?.body) {\r\n          const payload = {\r\n            body: replaceSchemaVariables({ variable: action.body, form, response, userForm }),\r\n            phoneNumber: '',\r\n          };\r\n          if (action?.variables?.length > 0) {\r\n            payload.body = replaceVariableValue2({\r\n              text: payload?.body,\r\n              variableValues,\r\n            });\r\n          }\r\n          const phoneField = response?.values?.filter(\r\n            (value) => value.field === action?.phoneFieldId,\r\n          )[0];\r\n          if (phoneField?.valueNumber) {\r\n            payload.phoneNumber = `+${phoneField?.valueNumber}`;\r\n          }\r\n          await sendSms(payload);\r\n        } else if (\r\n          action?.actionType === 'generateNewUser' &&\r\n          action?.senderEmail &&\r\n          action?.subject &&\r\n          action?.body &&\r\n          action?.receiverType === 'emailField' &&\r\n          action?.emailFieldId\r\n        ) {\r\n          const action = form.settings?.actions?.filter(\r\n            (a) => a.actionType === 'generateNewUser',\r\n          )[0];\r\n          const email = getFieldValue(action?.emailFieldId, response.values)?.value;\r\n          if (email) {\r\n            const tempUser = await User.findOne({ email: email });\r\n            if (tempUser) {\r\n              await ResponseModel.findByIdAndUpdate(response._id, { createdBy: tempUser._id });\r\n            }\r\n          }\r\n          const payload: any = {\r\n            from: action?.senderEmail,\r\n            body: replaceSchemaVariables({ variable: action?.body, form, response, userForm }),\r\n            subject: action?.subject,\r\n          };\r\n          payload.body = payload.body.split(`{{password}}`).join(response.options?.password || '');\r\n          if (action?.variables?.length > 0) {\r\n            payload.subject = replaceVariableValue2({\r\n              text: payload?.subject,\r\n              variableValues,\r\n            });\r\n            payload.body = replaceVariableValue2({\r\n              text: payload?.body,\r\n              variableValues,\r\n            });\r\n          }\r\n\r\n          const emailField = response?.values?.filter(\r\n            (value) => value.field === action?.emailFieldId,\r\n          )[0];\r\n          if (emailField) {\r\n            payload.to = [emailField?.value];\r\n          }\r\n          if (payload?.to?.length > 0) {\r\n            if (response.options.generateNewUserEmail) {\r\n              await sendEmail(payload);\r\n            }\r\n          }\r\n        } else if (\r\n          action?.actionType === 'sendInAppNotification' &&\r\n          (action?.receiverType === 'formOwner' ||\r\n            (action?.receiverType === 'responseSubmitter' && response?.createdBy?._id)) &&\r\n          action?.body\r\n        ) {\r\n          const notificationForm = await FormModel.findOne({ slug: 'notification' });\r\n          const feedPage = await PageModel.findOne({ slug: 'my' });\r\n\r\n          if (notificationForm && feedPage) {\r\n            const payload = { description: '', link: '', responseId: '' };\r\n            const body = replaceSchemaVariables({\r\n              variable: action?.body,\r\n              form,\r\n              response,\r\n              userForm,\r\n            });\r\n            payload.description = replaceVariableValue2({\r\n              text: body,\r\n              variableValues,\r\n            });\r\n            payload.link = `/form/${form.slug}/response/${response.count}`;\r\n            payload.responseId = response._id;\r\n            const responsePayload: any = {\r\n              formId: notificationForm._id,\r\n              values: [],\r\n              count: 1,\r\n              createdBy: null,\r\n              parentId: feedPage._id,\r\n            };\r\n\r\n            notificationForm?.fields?.forEach((field) => {\r\n              if (field.label.toLocaleLowerCase() === 'description') {\r\n                responsePayload.values.push({\r\n                  field: field._id,\r\n                  value: payload.description,\r\n                });\r\n              }\r\n              if (field.label.toLocaleLowerCase() === 'response id') {\r\n                responsePayload.values.push({\r\n                  field: field._id,\r\n                  value: payload.responseId,\r\n                });\r\n              }\r\n              if (field.label.toLocaleLowerCase() === 'link') {\r\n                responsePayload.values.push({\r\n                  field: field._id,\r\n                  value: payload.link,\r\n                });\r\n              }\r\n            });\r\n\r\n            if (action.receiverType === 'formOwner') {\r\n              responsePayload.createdBy = form.createdBy._id;\r\n            } else if (action.receiverType === 'responseSubmitter') {\r\n              responsePayload.createdBy = response.createdBy._id;\r\n            }\r\n            const lastResponse = await ResponseModel.findOne({\r\n              formId: responsePayload.formId,\r\n            }).sort('-count');\r\n            if (lastResponse) {\r\n              responsePayload.count = lastResponse?.count + 1;\r\n            }\r\n            await ResponseModel.create(responsePayload);\r\n          }\r\n        } else if (\r\n          action?.actionType === 'createSubDomainRoute53' &&\r\n          action.domain &&\r\n          action.distributionId\r\n        ) {\r\n          const domain = getFieldValue(action.domain, response.values);\r\n          if (!domain?.value) {\r\n            throw new Error('Account domain name not found');\r\n          }\r\n          const res = await createDistribution(domain.value);\r\n          const distributionId = { value: res?.Distribution?.Id, field: action.distributionId };\r\n          await ResponseModel.findByIdAndUpdate(\r\n            response._id,\r\n            { $push: { values: distributionId } },\r\n            { session },\r\n          );\r\n        } else if (\r\n          action?.actionType === 'updateSubDomainRoute53' &&\r\n          action.domain &&\r\n          action.distributionId\r\n        ) {\r\n          const domain = getFieldValue(action.domain, response.values);\r\n          const distributionId = getFieldValue(action.distributionId, response.values);\r\n          if (!domain?.value || !distributionId.value) {\r\n            throw new Error('Account domain name, distributionId not found');\r\n          }\r\n          // update cloudfront distribution\r\n        } else if (\r\n          action?.actionType === 'deleteSubDomainRoute53' &&\r\n          action.domain &&\r\n          action.distributionId\r\n        ) {\r\n          const domain = getFieldValue(action.domain, response.values);\r\n          const distributionId = getFieldValue(action.distributionId, response.values);\r\n          if (!domain?.value || !distributionId.value) {\r\n            throw new Error('Account domain name, distributionId not found');\r\n          }\r\n          // delete cloudfront distribution\r\n        } else if (\r\n          action?.actionType === 'createCognitoUser' &&\r\n          action?.userPoolId &&\r\n          // action?.firstName &&\r\n          // action?.lastName &&\r\n          action?.userEmail\r\n        ) {\r\n          const rolesField = form?.fields?.find(\r\n            (e) => e.fieldType === 'select' && e.label.toUpperCase().includes('ROLE'),\r\n          );\r\n          const rolesFieldId = rolesField?._id.toString();\r\n          const selectedFieldId = rolesField?.options?.formField;\r\n          const updatedRolesID = args?.values\r\n            ?.filter((e) => e.field === rolesFieldId)\r\n            ?.map((e) => e.response);\r\n          const RoleName: string[] = [];\r\n          for (let i = 0; i < updatedRolesID.length; i++) {\r\n            const tempResponse = await ResponseModel.findById(updatedRolesID[i]).lean();\r\n            const value = tempResponse?.values?.find((e) => e.field === selectedFieldId)?.value;\r\n            value && RoleName.push(value);\r\n          }\r\n\r\n          const fName = (getFieldValue(action?.firstName, response.values)?.value?.trim() ||\r\n            'First Name') as string;\r\n          const lName = (getFieldValue(action?.lastName, response.values)?.value?.trim() ||\r\n            'Last Name') as string;\r\n          const uEmail = getFieldValue(action?.userEmail, response.values)?.value?.trim() as string;\r\n\r\n          const checkUser = await isUserAlreadyExist({\r\n            Username: uEmail,\r\n            UserPoolId: action?.userPoolId,\r\n          });\r\n\r\n          const TemporaryPassword = generateUserPassword();\r\n\r\n          // USER DOES NOT EXISTS, SO CREATE THE USER\r\n          if (!checkUser?.message && checkUser.error === null) {\r\n            const payload: Parameters<typeof createAWSUser>[0] = {\r\n              UserPoolId: action?.userPoolId,\r\n              Username: uEmail,\r\n              MessageAction: 'SUPPRESS',\r\n              UserAttributes: [\r\n                {\r\n                  Name: 'email',\r\n                  Value: uEmail,\r\n                },\r\n                {\r\n                  Name: 'email_verified',\r\n                  Value: 'False',\r\n                },\r\n                {\r\n                  Name: 'name',\r\n                  Value: `${fName} ${lName}`,\r\n                },\r\n                {\r\n                  Name: 'custom:_id',\r\n                  Value: `${response._id}`,\r\n                },\r\n              ],\r\n              email: uEmail,\r\n              TemporaryPassword: TemporaryPassword,\r\n            };\r\n\r\n            const createdUser = await createAWSUser(payload);\r\n            // create response in users form before creating new user\r\n            // requirement: formid of users form\r\n            // formId: ID!;\r\n            // count: Int;\r\n            // values: [ValueInput]; field, value\r\n            // options: AWSJSON;\r\n            // cretedBy : can be null\r\n            if (form.slug !== 'users' && createdUser) {\r\n              const usersForm = await FormModel.findOne({ slug: 'users' });\r\n              const fNameField = usersForm?.fields?.find(\r\n                (field) => field?.label === 'First Name',\r\n              )?._id;\r\n              const lNameField = usersForm?.fields?.find(\r\n                (field) => field?.label === 'Last Name',\r\n              )?._id;\r\n              const emailField = usersForm?.fields?.find(\r\n                (field) => field?.fieldType === 'email',\r\n              )?._id;\r\n              const lastResponse = await ResponseModel.findOne({ formId: usersForm?._id }).sort(\r\n                '-count',\r\n              );\r\n              let responseCount;\r\n              if (lastResponse) {\r\n                responseCount = lastResponse?.count + 1;\r\n              } else {\r\n                responseCount = 1;\r\n              }\r\n              const cretatePayload = {\r\n                formId: usersForm?._id,\r\n                values: [\r\n                  {\r\n                    field: fNameField, // for first name\r\n                    value: fName,\r\n                  },\r\n                  {\r\n                    field: lNameField, // for last name\r\n                    value: lName,\r\n                  },\r\n                  {\r\n                    field: emailField, // for email\r\n                    value: uEmail,\r\n                  },\r\n                ],\r\n                count: responseCount,\r\n              };\r\n\r\n              await ResponseModel.create(cretatePayload);\r\n            }\r\n\r\n            const TemporaryPasswordMessage = `\\nUsername : <b>${uEmail}</b><br/>temporary password : <b>${TemporaryPassword}</b>`;\r\n\r\n            const subject = replaceVariableValue2({\r\n              text: action?.signupEmailSubject,\r\n              variableValues,\r\n            });\r\n            const body = replaceVariableValue2({\r\n              text: action?.signupEmailBody,\r\n              variableValues,\r\n            });\r\n\r\n            // SEND SIGNUP EMAIL TO THE USER\r\n            await sendEmail({\r\n              from: action?.templateSenderEmail,\r\n              to: [uEmail],\r\n              subject: subject,\r\n              body: body + TemporaryPasswordMessage,\r\n            });\r\n          }\r\n\r\n          // add user to group\r\n          for (let i = 0; i < RoleName?.length; i++) {\r\n            const Cpayload = {\r\n              GroupName: RoleName[i],\r\n              UserPoolId: action?.userPoolId,\r\n              Username: uEmail,\r\n            };\r\n            await addUserToGroup(Cpayload);\r\n          }\r\n        } else if (action?.actionType === 'createCognitoGroup') {\r\n          const ResponseValue = args?.values\r\n            ?.filter((e) => e.field === action?.cognitoGroupName)[0]\r\n            ?.value.trim();\r\n          const Desc = args?.values\r\n            ?.filter((e) => e?.field === action?.cognitoGroupDesc)[0]\r\n            ?.value.trim();\r\n          const payload = {\r\n            GroupName: ResponseValue,\r\n            UserPoolId: action?.userPoolId,\r\n            Description: Desc,\r\n          };\r\n          const highPriorityGroup = [\r\n            'superadmin',\r\n            'us-east-1_eBnsz43bl_Facebook',\r\n            'us-east-1_eBnsz43bl_Google',\r\n          ];\r\n          if (!highPriorityGroup.includes(payload.GroupName)) await createCognitoGroup(payload);\r\n          else\r\n            return {\r\n              message: 'you are not allowd for this action',\r\n            };\r\n        } else if (action?.actionType === 'deleteCognitoUser') {\r\n          const selectItemInForm = response?.values?.filter((e) => e?.response !== null)[0]\r\n            ?.response;\r\n          const selectItemResponse = await ResponseModel.findById(selectItemInForm);\r\n          const selectForm = await FormModel.findById(selectItemResponse?.formId);\r\n          const selectItemField = selectForm?.fields\r\n            ?.filter((e) => e?.fieldType === 'text' && e?.label?.toUpperCase().includes('ROLE'))\r\n            .map((e) => e._id);\r\n          const RoleName =\r\n            selectItemResponse?.values\r\n              ?.filter((e) => selectItemField?.includes(e.field))\r\n              .map((e) => e.value) || [];\r\n\r\n          const uEmail = response?.values\r\n            ?.filter((e) => e?.field === action?.userEmail)[0]\r\n            ?.value.trim();\r\n\r\n          const payload = {\r\n            UserPoolId: action?.userPoolId,\r\n            Username: uEmail,\r\n          };\r\n          try {\r\n            for (let i = 0; i < RoleName?.length; i++) {\r\n              const Dpayload = {\r\n                GroupName: RoleName[i],\r\n                UserPoolId: action?.userPoolId,\r\n                Username: uEmail,\r\n              };\r\n              await removeUserFromGroup(Dpayload);\r\n            }\r\n            await deleteUser(payload);\r\n          } catch (error) {\r\n            return error.message;\r\n          }\r\n        } else if (action.actionType === 'deleteCognitoGroup') {\r\n          const ResponseValue = response?.values\r\n            ?.filter((e) => e.field === action?.cognitoGroupName)[0]\r\n            ?.value.trim();\r\n          const payload = {\r\n            GroupName: ResponseValue,\r\n            UserPoolId: action?.userPoolId,\r\n          };\r\n          const highPriorityGroup = [\r\n            'superadmin',\r\n            'us-east-1_eBnsz43bl_Facebook',\r\n            'us-east-1_eBnsz43bl_Google',\r\n          ];\r\n          if (!highPriorityGroup.includes(payload.GroupName)) {\r\n            await deleteCognitoGroup(payload);\r\n          } else {\r\n            throw new Error('you are not allowd for this action');\r\n          }\r\n        } else if (\r\n          action.actionType === 'updateCognitoUser' &&\r\n          action?.userPoolId &&\r\n          action?.userEmail\r\n        ) {\r\n          const fName = args?.values\r\n            ?.filter((e) => e?.field === action?.firstName)[0]\r\n            ?.value.trim();\r\n          const lName = args?.values?.filter((e) => e?.field === action?.lastName)[0]?.value.trim();\r\n          const uEmail = args?.values\r\n            ?.filter((e) => e?.field === action?.userEmail)[0]\r\n            ?.value.trim();\r\n          const rolesField = form?.fields?.find(\r\n            (e) => e.fieldType === 'select' && e.label.toUpperCase().includes('ROLE'),\r\n          );\r\n          const rolesFieldId = rolesField?._id.toString();\r\n          const selectedFieldId = rolesField?.options?.formField;\r\n          const updatedRolesID = args?.values\r\n            ?.filter((e) => e.field === rolesFieldId)\r\n            ?.map((e) => e.response);\r\n          const selectedResponse: string[] = [];\r\n          for (let i = 0; i < updatedRolesID.length; i++) {\r\n            const tempResponse = await ResponseModel.findById(updatedRolesID[i]).lean();\r\n            const value = tempResponse?.values?.find((e) => e.field === selectedFieldId)?.value;\r\n            value && selectedResponse.push(value);\r\n          }\r\n          const cognitoGroupList =\r\n            (\r\n              await getGroupListOfUser({\r\n                UserPoolId: action?.userPoolId,\r\n                Username: uEmail,\r\n              })\r\n            )?.Groups || [];\r\n\r\n          const cognitoGroupListName: string[] = cognitoGroupList?.map((e) => e.GroupName || '');\r\n\r\n          for (let i = 0; i < selectedResponse.length; i++) {\r\n            if (!cognitoGroupListName?.includes(selectedResponse[i])) {\r\n              const Cpayload = {\r\n                GroupName: selectedResponse[i],\r\n                UserPoolId: action?.userPoolId,\r\n                Username: uEmail,\r\n              };\r\n              await addUserToGroup(Cpayload);\r\n            }\r\n          }\r\n          for (let i = 0; i < cognitoGroupListName?.length; i++) {\r\n            if (\r\n              cognitoGroupListName[i] !== '' &&\r\n              !selectedResponse?.includes(cognitoGroupListName[i])\r\n            ) {\r\n              const Dpayload = {\r\n                GroupName: cognitoGroupListName[i],\r\n                UserPoolId: action?.userPoolId,\r\n                Username: uEmail,\r\n              };\r\n              await removeUserFromGroup(Dpayload);\r\n            }\r\n          }\r\n          const payload = {\r\n            UserPoolId: action?.userPoolId,\r\n            Username: uEmail,\r\n            UserAttributes: [\r\n              {\r\n                Name: 'email',\r\n                Value: uEmail,\r\n              },\r\n              // AUTO VERIFY THE EMAIL | THIS WILL BE REMOVED IN THE FUTURE\r\n              {\r\n                Name: 'email_verified',\r\n                Value: 'True',\r\n              },\r\n              {\r\n                Name: 'name',\r\n                Value: `${fName} ${lName}`,\r\n              },\r\n            ],\r\n          };\r\n\r\n          await updateUserAttributes(payload);\r\n        } else if (action.actionType === 'updateCognitoGroup') {\r\n          const ResponseValue = args?.values\r\n            ?.filter((e) => e.field === action?.cognitoGroupName)[0]\r\n            ?.value.trim();\r\n          const Desc = args?.values\r\n            ?.filter((e) => e?.field === action?.cognitoGroupDesc)[0]\r\n            ?.value.trim();\r\n          const payload = {\r\n            GroupName: ResponseValue,\r\n            UserPoolId: action?.userPoolId,\r\n            Description: Desc,\r\n          };\r\n\r\n          const highPriorityGroup = [\r\n            'superadmin',\r\n            'us-east-1_eBnsz43bl_Facebook',\r\n            'us-east-1_eBnsz43bl_Google',\r\n          ];\r\n          if (!highPriorityGroup.includes(payload.GroupName)) await updateCognitoGroup(payload);\r\n          else\r\n            return {\r\n              message: 'you are not allowd for this action',\r\n            };\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n"]}