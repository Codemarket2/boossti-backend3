{"version":3,"file":"sms.js","sourceRoot":"","sources":["sms.ts"],"names":[],"mappings":";;;AAAA,+BAA+B;AAE/B,MAAM,EAAE,mBAAmB,GAAG,EAAE,EAAE,GAAG,OAAO,CAAC,GAAG,CAAC;AAEjD,MAAM,GAAG,GAAG,IAAI,GAAG,CAAC,GAAG,CAAC,EAAE,MAAM,EAAE,WAAW,EAAE,UAAU,EAAE,YAAY,EAAE,CAAC,CAAC;AAOpE,MAAM,OAAO,GAAG,CAAC,OAAgB,EAAE,EAAE;IAC1C,IAAI,MAAM,GAAQ;QAChB,OAAO,EAAE,OAAO,CAAC,IAAI;QACrB,WAAW,EAAE,OAAO,CAAC,WAAW;KACjC,CAAC;IACF,IAAI,OAAO,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,mBAAmB,EAAE;QAC7D,MAAM,GAAG;YACP,GAAG,MAAM;YACT,iBAAiB,EAAE;gBACjB,CAAC,+BAA+B,CAAC,EAAE;oBACjC,QAAQ,EAAE,QAAQ;oBAClB,WAAW,EAAE,mBAAmB;iBACjC;aACF;SACF,CAAC;KACH;IACD,OAAO,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,OAAO,EAAE,CAAC;AACvC,CAAC,CAAC;AAjBW,QAAA,OAAO,WAiBlB","sourcesContent":["import * as AWS from 'aws-sdk';\r\n\r\nconst { SNS_ORIGINAL_NUMBER = '' } = process.env;\r\n\r\nconst sns = new AWS.SNS({ region: 'us-east-1', apiVersion: '2010-03-31' });\r\n\r\ninterface Payload {\r\n  phoneNumber: string;\r\n  body: string;\r\n}\r\n\r\nexport const sendSms = (payload: Payload) => {\r\n  let params: any = {\r\n    Message: payload.body,\r\n    PhoneNumber: payload.phoneNumber,\r\n  };\r\n  if (payload.phoneNumber.includes('+1') && SNS_ORIGINAL_NUMBER) {\r\n    params = {\r\n      ...params,\r\n      MessageAttributes: {\r\n        ['AWS.SNS.SMS.OriginationNumber']: {\r\n          DataType: 'String',\r\n          StringValue: SNS_ORIGINAL_NUMBER,\r\n        },\r\n      },\r\n    };\r\n  }\r\n  return sns.publish(params).promise();\r\n};\r\n"]}