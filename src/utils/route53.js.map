{"version":3,"file":"route53.js","sourceRoot":"","sources":["route53.ts"],"names":[],"mappings":";;;AAAA,+BAA+B;AAE/B,MAAM,OAAO,GAAG,IAAI,GAAG,CAAC,OAAO,CAAC,EAAE,MAAM,EAAE,WAAW,EAAE,UAAU,EAAE,YAAY,EAAE,CAAC,CAAC;AAEnF,MAAM,YAAY,GAAG,sBAAsB,CAAC;AAErC,MAAM,YAAY,GAAG,CAAC,SAAS,EAAE,aAAa,EAAE,EAAE;IACvD,MAAM,MAAM,GAAG;QACb,WAAW,EAAE;YACX,OAAO,EAAE;gBACP;oBACE,MAAM,EAAE,QAAQ;oBAChB,iBAAiB,EAAE;wBACjB,WAAW,EAAE;4BACX,OAAO,EAAE,aAAa;4BACtB,oBAAoB,EAAE,KAAK;4BAC3B,YAAY,EAAE,gBAAgB;yBAC/B;wBACD,IAAI,EAAE,GAAG,SAAS,cAAc;wBAChC,IAAI,EAAE,GAAG;qBACV;iBACF;aACF;YACD,OAAO,EAAE,iBAAiB,SAAS,MAAM;SAC1C;QACD,YAAY,EAAE,YAAY;KAC3B,CAAC;IACF,OAAO,OAAO,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC,OAAO,EAAE,CAAC;AAC5D,CAAC,CAAC;AAtBW,QAAA,YAAY,gBAsBvB;AAEK,MAAM,YAAY,GAAG,CAAC,SAAS,EAAE,aAAa,EAAE,EAAE;IACvD,MAAM,MAAM,GAAG;QACb,WAAW,EAAE;YACX,OAAO,EAAE;gBACP;oBACE,MAAM,EAAE,QAAQ;oBAChB,iBAAiB,EAAE;wBACjB,WAAW,EAAE;4BACX,OAAO,EAAE,aAAa;4BACtB,oBAAoB,EAAE,KAAK;4BAC3B,YAAY,EAAE,gBAAgB;yBAC/B;wBACD,IAAI,EAAE,GAAG,SAAS,cAAc;wBAChC,IAAI,EAAE,GAAG;qBACV;iBACF;aACF;YACD,iDAAiD;SAClD;QACD,YAAY,EAAE,YAAY;KAC3B,CAAC;IACF,OAAO,OAAO,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC,OAAO,EAAE,CAAC;AAC5D,CAAC,CAAC;AAtBW,QAAA,YAAY,gBAsBvB;AAEK,MAAM,UAAU,GAAG,CAAC,SAAS,EAAE,EAAE;IACtC,MAAM,MAAM,GAAG;QACb,YAAY,EAAE,YAAY;QAC1B,4BAA4B;QAC5B,yCAAyC;QACzC,eAAe,EAAE,GAAG,SAAS,cAAc;QAC3C,eAAe,EAAE,GAAG;KACrB,CAAC;IACF,OAAO,OAAO,CAAC,sBAAsB,CAAC,MAAM,CAAC,CAAC,OAAO,EAAE,CAAC;AAC1D,CAAC,CAAC;AATW,QAAA,UAAU,cASrB","sourcesContent":["import * as AWS from 'aws-sdk';\r\n\r\nconst route53 = new AWS.Route53({ region: 'us-east-1', apiVersion: '2013-04-01' });\r\n\r\nconst hostedZoneId = 'Z070537859VUC3HLYUSR';\r\n\r\nexport const createRecord = (subDomain, cloudfrontUrl) => {\r\n  const params = {\r\n    ChangeBatch: {\r\n      Changes: [\r\n        {\r\n          Action: 'CREATE',\r\n          ResourceRecordSet: {\r\n            AliasTarget: {\r\n              DNSName: cloudfrontUrl,\r\n              EvaluateTargetHealth: false,\r\n              HostedZoneId: 'Z2FDTNDATAQYW2',\r\n            },\r\n            Name: `${subDomain}.boossti.com`,\r\n            Type: 'A',\r\n          },\r\n        },\r\n      ],\r\n      Comment: `Subdomain for ${subDomain} app`,\r\n    },\r\n    HostedZoneId: hostedZoneId,\r\n  };\r\n  return route53.changeResourceRecordSets(params).promise();\r\n};\r\n\r\nexport const deleteRecord = (subDomain, cloudfrontUrl) => {\r\n  const params = {\r\n    ChangeBatch: {\r\n      Changes: [\r\n        {\r\n          Action: 'DELETE',\r\n          ResourceRecordSet: {\r\n            AliasTarget: {\r\n              DNSName: cloudfrontUrl,\r\n              EvaluateTargetHealth: false,\r\n              HostedZoneId: 'Z2FDTNDATAQYW2',\r\n            },\r\n            Name: `${subDomain}.boossti.com`,\r\n            Type: 'A',\r\n          },\r\n        },\r\n      ],\r\n      // Comment: `Subdomain for ${subDomain} account`,\r\n    },\r\n    HostedZoneId: hostedZoneId,\r\n  };\r\n  return route53.changeResourceRecordSets(params).promise();\r\n};\r\n\r\nexport const getRecords = (subDomain) => {\r\n  const params = {\r\n    HostedZoneId: hostedZoneId,\r\n    // MaxItems: 'STRING_VALUE',\r\n    // StartRecordIdentifier: 'STRING_VALUE',\r\n    StartRecordName: `${subDomain}.boossti.com`,\r\n    StartRecordType: 'A',\r\n  };\r\n  return route53.listResourceRecordSets(params).promise();\r\n};\r\n"]}